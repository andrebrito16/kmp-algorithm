<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <title>Algoritmo de Knuth-Morris-Pratt (KMP)</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,700;1,400;1,700&family=Open+Sans+Condensed:ital,wght@0,300;1,300&family=Open+Sans:ital,wght@0,300;0,400;0,700;0,800;1,300;1,400;1,700;1,800&family=Oxygen+Mono&family=Josefin+Sans:ital,wght@0,200;0,600;1,200;1,600&display=swap">
        <link rel="stylesheet" href="assets/css/reset.css">
        <link rel="stylesheet" href="assets/css/highlight.css">
        <link rel="stylesheet" href="assets/css/style.css">
        <link rel="stylesheet" href="assets/css/color.css">
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script async src="https://static.codepen.io/assets/embed/ei.js"></script>
        <script src="assets/js/highlight.js"></script>
        <script src="assets/js/script.js"></script>
    </head>
    <body>
        <div class="container">
            <header>
                <a href="">abrir tudo</a>
                <a href="">fechar tudo</a>
            </header>
            <main>

<p><a href="https://ensino.hashi.pro.br/desprog/" target="_blank">Desafios de Programação</a></p>
<h1>Algoritmo de Knuth-Morris-Pratt (KMP)</h1>
<div class="slide">
<div class="slide-container">
<div class="slide-header">

</div>
<div class="slide-main">
<p>Desafios de Programação</p>
<p><strong>Aula 22: Knuth-Morris-Pratt (KMP)</strong></p>
</div>
</div>
</div>
<div class="slide">
<div class="slide-container">
<div class="slide-header">
História KMP
</div>
<div class="slide-main">
<ul>
<li class="frame small">
<p>É uma das soluções mais eficientes para o problema de correspondência de padrões em uma string.</p>
</li>
<li class="frame small">
<p>Desenvolvido em 1977 pelos pesquisadores Donald Knuth, James Morris e Vaughan Pratt</p>
</li>
<li class="frame small">
<p>Processamento de Linguagem Neural, Ánalise de Dados e Bioinformática</p>
</li>
</ul>
</div>
</div>
</div>
<div class="slide">
<div class="slide-container">
<div class="slide-header">
=
</div>
<div class="slide-main">
<ul>
<li class="frame small">O algoritmo KMP compara o primeiro caractere do padrão (frase ou palavra) com o primeiro caractere do texto.</li>
<li class="frame small">Se os demais caracteres tiverem correspondência, a comparação ocorre caractere por caractere até encontrar uma diferença.</li>
<li class="frame small">Quando uma diferença é encontrada, o algoritmo utiliza uma tabela para determinar o salto necessário para o próximo caractere.</li>
</ul>
</div>
</div>
</div>
<div class="slide">
<div class="slide-container">
<div class="slide-header">
=
</div>
<div class="slide-main">
<figure class="img"><img src="img/Funcionamento/Funcionamento00.png" alt=""></figure>
<div class="slide">
<div class="slide-container">
<div class="slide-header">
=
</div>
<div class="slide-main">
<figure class="img"><img src="img/Funcionamento/Funcionamento01.png" alt=""></figure>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="slide">
<div class="slide-container">
<div class="slide-header">
=
</div>
<div class="slide-main">
<figure class="img"><img src="img/Funcionamento/Funcionamento02.png" alt=""></figure>
</div>
</div>
</div>
<div class="slide">
<div class="slide-container">
<div class="slide-header">
=
</div>
<div class="slide-main">
<figure class="img"><img src="img/Funcionamento/Funcionamento03.png" alt=""></figure>
</div>
</div>
</div>
<div class="slide">
<div class="slide-container">
<div class="slide-header">
=
</div>
<div class="slide-main">
<figure class="img"><img src="img/Funcionamento/Funcionamento04.png" alt=""></figure>
</div>
</div>
</div>
<div class="slide">
<div class="slide-container">
<div class="slide-header">
=
</div>
<div class="slide-main">
<figure class="img"><img src="img/Funcionamento/Funcionamento05.png" alt=""></figure>
</div>
</div>
</div>
<div class="slide">
<div class="slide-container">
<div class="slide-header">
=
</div>
<div class="slide-main">
<figure class="img"><img src="img/Funcionamento/Funcionamento06.png" alt=""></figure>
</div>
</div>
</div>
<div class="slide">
<div class="slide-container">
<div class="slide-header">
=
</div>
<div class="slide-main">
<figure class="img"><img src="img/Funcionamento/Funcionamento07.png" alt=""></figure>
</div>
</div>
</div>
<div class="slide">
<div class="slide-container">
<div class="slide-header">
=
</div>
<div class="slide-main">
<figure class="img"><img src="img/Funcionamento/Funcionamento08.png" alt=""></figure>
</div>
</div>
</div>
<div class="slide">
<div class="slide-container">
<div class="slide-header">
=
</div>
<div class="slide-main">
<figure class="img"><img src="img/Funcionamento/Funcionamento09.png" alt=""></figure>
</div>
</div>
</div>
<div class="slide">
<div class="slide-container">
<div class="slide-header">
Vantagens do Algoritmo
</div>
<div class="slide-main">
<ul>
<li class="frame">
<p>Eficiência: Evita comparações desnecessárias, resultando em um processo de busca mais rápido.</p>
</li>
<li class="frame">
<p>Utilização da tabela: A tabela auxilia no cálculo dos saltos, otimizando a localização dos padrões.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="slide">
<div class="slide-container">
<div class="slide-header">

</div>
<div class="slide-main">
<p><strong>Handout</strong></p>
<ul>
<li class="small">
<p>Agora podem tanto fazer individualmente quanto em grupo…</p>
</li>
<li class="small">
<p>…e discussões em grupo podem de fato fazer diferença…</p>
</li>
<li class="small">
<p>…mas, em algum momento, é importante fazer individualmente.</p>
</li>
<li class="small">
<p>Se há gabarito, veja só em último caso.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="slide">
<div class="slide-container">
<div class="slide-header">

</div>
<div class="slide-main">
<p><strong>Observações</strong></p>
<ul>
<li class="small">
<p>Aprendizado ativo é fazer, não ler.</p>
</li>
<li class="small">
<p>Exceto em um ou outro caso excepcional, uma atividade é possível sem consulta além do material de aula dado até o momento.</p>
</li>
<li class="small">
<p>Além disso, muitas vezes a resposta da atividade é necessária para a compreensão do restante.</p>
</li>
<li class="small">
<p>Ou seja, “deixar para entender depois” não faz sentido. “Depois” depende de “entender”.</p>
</li>
</ul>
</div>
</div>
</div>
<blockquote class="warning">
<p>Aviso</p>
<p>Precisa:</p>
<ul>
<li>Explicar muito bem, com exercícios, sobre o “pulo” do algoritmo</li>
<li>Melhorar a parte da tabela de prefixos/sufixos e os exercícios</li>
<li>Implementação, pode ser um exercício desafio</li>
</ul>
</blockquote>
<h2>1.O Problema da Busca de Substrings</h2>
<p>A busca de substrings é um problema comum em ciência da computação. A questão é: dado um texto e um padrão, podemos encontrar todas as ocorrências do padrão dentro do texto?</p>
<p>A solução mais simples, mas também a mais lenta, é verificar cada substring do texto em sequência para ver se ela corresponde ao padrão, a chamada força bruta. No entanto, essa abordagem tem uma complexidade de tempo de O(nm), onde n é o comprimento do texto e m é o comprimento do padrão. Isso é muito ineficiente, especialmente para textos longos.</p>
<p>Felizmente, existem algoritmos mais rápidos. O Algoritmo de Knuth-Morris-Pratt (KMP) é um desses algoritmos.</p>
<h2>2.O Algoritmo KMP</h2>
<p>O algoritmo KMP foi inventado por Donald Knuth, Vaughan Pratt e James H. Morris em 1977.</p>
<p>O KMP se baseia em uma observação importante: quando encontramos um mismatch (desajuste) após alguns matches, então já sabemos alguns caracteres no texto do próximo segmento. Logo, não precisamos mover o segmento para a próxima imediata posição, podemos usar algumas das informações que já obtivemos para mover o segmento para a posição ideal.</p>
<p>O algoritmo KMP utiliza uma tabela de valores pré-computados chamada de tabela LPS (Longest Proper Prefix which is also suffix - Maior prefixo apropriado que é também sufixo) para pular caracteres desnecessários.</p>
<h2>3.Construindo a tabela LPS</h2>
<p>A tabela do algoritmo refere-se à tabela de sufixos e prefixos. Nesse contexto, a tabela é construída a partir dos caracteres desejados, gerando os sufixos e prefixos correspondentes. Em seguida, verifica-se o maior tamanho entre os sufixos e prefixos que são iguais. Esse tamanho é usado como um índice que indica quantos caracteres a palavra ou frase deve avançar.</p>
<div class="animation"><img class="frame" src="img/tabela_prefixo/prefixo0.png" alt="1"><img class="frame" src="img/tabela_prefixo/prefixo1.png" alt="2"><img class="frame" src="img/tabela_prefixo/prefixo2.png" alt="3"><img class="frame" src="img/tabela_prefixo/prefixo3.png" alt="4"><img class="frame" src="img/tabela_prefixo/prefixo4.png" alt="5"><img class="frame" src="img/tabela_prefixo/prefixo5.png" alt="6"><img class="frame" src="img/tabela_prefixo/prefixo6.png" alt="7"><img class="frame" src="img/tabela_prefixo/prefixo7.png" alt="8"></div>
<p>Agora que aprendemos, vamos fazer alguns exercícios para fixar o conteúdo.</p>
<blockquote class="question">
<p>Exercício 1</p>
<p>Construa a tabela de prefixos e sufixos para:</p>
<figure class="img"><img src="img/Exercicios/Exercicio1.png" alt=""></figure>
<details class="answer">
<summary>Gabarito</summary>
<figure class="img"><img src="img/Gabaritos/Gabarito1.png" alt=""></figure>
</details>
<details class="answer">
<summary>Gabarito Detalhado</summary>
<div class="animation"><img class="frame" src="img/Gabarito_Detalhado_1/GabaritoDetalhado10.png" alt="1"><img class="frame" src="img/Gabarito_Detalhado_1/GabaritoDetalhado11.png" alt="2"><img class="frame" src="img/Gabarito_Detalhado_1/GabaritoDetalhado12.png" alt="3"><img class="frame" src="img/Gabarito_Detalhado_1/GabaritoDetalhado13.png" alt="4"><img class="frame" src="img/Gabarito_Detalhado_1/GabaritoDetalhado14.png" alt="5"><img class="frame" src="img/Gabarito_Detalhado_1/GabaritoDetalhado15.png" alt="6"><img class="frame" src="img/Gabarito_Detalhado_1/GabaritoDetalhado16.png" alt="7"><img class="frame" src="img/Gabarito_Detalhado_1/GabaritoDetalhado17.png" alt="8"><img class="frame" src="img/Gabarito_Detalhado_1/GabaritoDetalhado18.png" alt="9"></div>
</details>
</blockquote>
<blockquote class="question">
<p>Exercício 2</p>
<p>Construa a tabela de prefixos e sufixos para:</p>
<figure class="img"><img src="img/Exercicios/Exercicio2.png" alt=""></figure>
<details class="answer">
<summary>Gabarito</summary>
<figure class="img"><img src="img/Gabaritos/Gabarito2.png" alt=""></figure>
</details>
<details class="answer">
<summary>Gabarito Detalhado</summary>
<div class="animation"><img class="frame" src="img/Gabarito_Detalhado_2/GabaritoDetalhado20.png" alt="1"><img class="frame" src="img/Gabarito_Detalhado_2/GabaritoDetalhado21.png" alt="2"><img class="frame" src="img/Gabarito_Detalhado_2/GabaritoDetalhado22.png" alt="3"><img class="frame" src="img/Gabarito_Detalhado_2/GabaritoDetalhado23.png" alt="4"><img class="frame" src="img/Gabarito_Detalhado_2/GabaritoDetalhado24.png" alt="5"><img class="frame" src="img/Gabarito_Detalhado_2/GabaritoDetalhado25.png" alt="6"><img class="frame" src="img/Gabarito_Detalhado_2/GabaritoDetalhado26.png" alt="7"><img class="frame" src="img/Gabarito_Detalhado_2/GabaritoDetalhado27.png" alt="8"><img class="frame" src="img/Gabarito_Detalhado_2/GabaritoDetalhado28.png" alt="9"></div>
</details>
</blockquote>
<blockquote class="question">
<p>Exercício 3</p>
<p>Construa a tabela de prefixos e sufixos para:</p>
<figure class="img"><img src="img/Exercicios/Exercicio3.png" alt=""></figure>
<details class="answer">
<summary>Gabarito</summary>
<figure class="img"><img src="img/Gabaritos/Gabarito3.png" alt=""></figure>
</details>
<details class="answer">
<summary>Gabarito Detalhado</summary>
<div class="animation"><img class="frame" src="img/Gabarito_Detalhado_3/GabaritoDetalhado30.png" alt="1"><img class="frame" src="img/Gabarito_Detalhado_3/GabaritoDetalhado31.png" alt="2"><img class="frame" src="img/Gabarito_Detalhado_3/GabaritoDetalhado32.png" alt="3"><img class="frame" src="img/Gabarito_Detalhado_3/GabaritoDetalhado33.png" alt="4"><img class="frame" src="img/Gabarito_Detalhado_3/GabaritoDetalhado34.png" alt="5"><img class="frame" src="img/Gabarito_Detalhado_3/GabaritoDetalhado35.png" alt="6"><img class="frame" src="img/Gabarito_Detalhado_3/GabaritoDetalhado36.png" alt="7"><img class="frame" src="img/Gabarito_Detalhado_3/GabaritoDetalhado37.png" alt="8"><img class="frame" src="img/Gabarito_Detalhado_3/GabaritoDetalhado38.png" alt="9"></div>
</details>
</blockquote>
<blockquote class="warning">
<p>Aviso</p>
<p>Escrever mais (explicação dos exercícios, etc) e falar da complexidade</p>
</blockquote>
<h2>4.Implementação em C</h2>
<p>O KMP usa uma tabela de falhas (também conhecida como tabela de borda) para armazenar informações sobre o padrão que são usadas para evitar comparações repetidas. A tabela de falhas é construída antes de iniciar a correspondência de padrões e é baseada no padrão a ser encontrado.</p>
<blockquote class="warning">
<p>Aviso</p>
<p>A ser melhorado</p>
</blockquote>
<blockquote class="question">
<p>Pergunta</p>
<p>Como seria uma implementação do algoritmo KMP em C?</p>
<details class="answer">
<summary>Resposta</summary>
<p>Aqui está um exemplo de implementação do algoritmo KMP em C:</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

void preencher_tabela(int tabela[], char padrao[])
{
    int tam_padrao = strlen(padrao);
    int i = 0, j = -1;
    tabela[0] = -1;

    while (i &lt; tam_padrao)
    {
        while (j &gt;= 0 &amp;&amp; padrao[i] != padrao[j])
        {
            j = tabela[j];
        }

        i++;
        j++;
        tabela[i] = j;
    }
}

void encontrar_padrao(char texto[], char padrao[])
{
    int tam_texto = strlen(texto);
    int tam_padrao = strlen(padrao);
    int tabela[tam_padrao];
    preencher_tabela(tabela, padrao);
    int i = 0, j = 0;

    while (i &lt; tam_texto)
    {
        while (j &gt;= 0 &amp;&amp; texto[i] != padrao[j])
        {
            j = tabela[j];
        }

        i++;
        j++;

        if (j == tam_padrao)
        {
            printf("Padrao encontrado na posicao %d\n", i - j);
            j = tabela[j];
        }
    }
}

int main()
{
    char texto[] = "ababcabcabababcabcabc";
    char padrao[] = "abcabc";
    encontrar_padrao(texto, padrao);
    return 0;
}
</code></pre>
</details>
</blockquote>


            </main>
            <footer>
                <a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank">
                    <img alt="CC BY-SA 4.0" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" title="Creative Commons Attribution-ShareAlike 4.0 International License"/>
                </a>
                © 2022 Marcelo Hashimoto
            </footer>
        </div>
    </body>
</html>
